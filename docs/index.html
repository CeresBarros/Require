<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Installing and loading R packages for reproducible workflows • Require</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Installing and loading R packages for reproducible workflows">
<meta property="og:description" content="A single key function, `Require` that wraps `install.packages`,
    `remotes::install_github`, `versions::install.versions`, and `base::require`
    that allows for reproducible workflows. As with other functions in a
    reproducible workflow, this package emphasizes functions that return the 
    same result whether it is the first or subsequent times running the function.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-58633549-5"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-58633549-5');
</script>
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">Require</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/PredictiveEcology/Require">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div id="require" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#require" class="anchor"></a>Require</h1></div>

<p>A simple package for reproducible package management in R. Built on top of <code>git2r</code> and <code>archivist</code>, this package aims at making high-level, robust, machine and OS independent tools for making deeply reproducible package management in R. This extends beyond the package management utilities of <code>packrat</code> and <code>checkpoint</code> by including all in one management for packages in R focused around a single function, <code>Require</code>.</p>
</div>
<div id="objectives" class="section level1">
<h1 class="hasAnchor">
<a href="#objectives" class="anchor"></a>Objectives</h1>
<p>Some packages, including those in our PredictiveEcology repository, have <em>many</em> package dependencies. Some of them are on CRAN, but some are still in development and so are hosted elsewhere. Mixing many package dependencies that are constantly evolving creates challenges with standard R package management. For example, what is the best way to move analyses from one machine to another, or set up a series of High Performance Compute nodes? How should we use functions like <code>install.packages</code> in a reproducible workflow that are clearly intended to be used once or very few times? How do we deal with many packages on GitHub that have many common dependencies? Finally, how do we do all this for many concurrent projects without installing hundreds of packages in a new directory for every project?</p>
<p>The <code>Require</code> package attempts to address these issues and others. It is different than <code>packrat</code> in that it is much simpler and is closer to base R package management. <code>Require</code> <em>can</em> use hierarchical library paths, as in base R, with many paths in the <code><a href="https://rdrr.io/r/base/libPaths.html">.libPaths()</a></code>, or can set a single library path to be <code>standAlone</code>. This allows “system” packages to be used as well as “project-specific” packages to be used together, as in base R. It is different than other packages like <code>renv</code> in that it is focused around a single function, <code>Require</code>, that can be used in a reproducible workflow. <code>renv</code> uses a notion of package versions, the “snapshot”, <em>as installed</em> at its foundation; any changes to package versions by a user then updates this snapshot. <code>renv</code> does not keep this information in the source code of the project. <code>Require</code> uses the notion of a “snapshot” as a decision to make by a user when it is time to <em>set</em> the package versions. Package versions are primarily updated by the code developer by stating the minimum (or maximum) package version <em>in the source code</em>. This means that by default, projects are somewhat more fluid, defined by no package version if none is required or minimum (or maximum) package versions if required until it is time to freeze it, say when publishing or needing to set up virtual machines with identical setup. From this perspective, <code>renv</code> is more “top-down”, and <code>Require</code> is more “bottom-up”, though they can each emulate the other’s behaviour.</p>
<p>We define a reproducible workflow as a workflow that can be run from the start to any point in the project, without having to “skip over” or “comment out” or “jump to” particular lines or chunks of code. <code>Require</code> does that.</p>
<div id="basic-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-usage" class="anchor"></a>Basic usage</h2>
<p><code>Require</code> is essentially a wrapper around functions that install packages, e.g., <code>install.packages</code>, <code>install_github</code> and one of the main function to load packages, <code>require</code>. It is vectorized on package names.</p>
<p>```{r Intro, eval=FALSE}</p>
</div>
</div>
<div id="installpackagesrequire--sadly-require-cant-install-itself-so-must-comment-this-line" class="section level1">
<h1 class="hasAnchor">
<a href="#installpackagesrequire--sadly-require-cant-install-itself-so-must-comment-this-line" class="anchor"></a>install.packages(“Require”) # sadly, Require can’t install itself, so must comment this line</h1>
<p>library(Require) Require(“data.table”)</p>
</div>
<div id="with-version-numbering" class="section level1">
<h1 class="hasAnchor">
<a href="#with-version-numbering" class="anchor"></a>With version numbering</h1>
<p>Require(“data.table (&gt;=1.12.8)”)</p>
</div>
<div id="vectorized-mixed-github-and-cran-mixed-version-number-and-not" class="section level1">
<h1 class="hasAnchor">
<a href="#vectorized-mixed-github-and-cran-mixed-version-number-and-not" class="anchor"></a>vectorized, mixed github and CRAN, mixed version number and not</h1>
<p>Require(c(“data.table (&gt;=1.12.8)”, “PredictiveEcology/quickPlot”))</p>
<pre><code>
## Advanced usage

### Keeping it all isolated

We can keep all packages in an isolated folder for a project, using `standAlone = TRUE`

```{r standALone}
setLibPaths("Project_A_Packages", standAlone = TRUE)
.libPaths() # this is just to check what happened in the previous line -- there are 2 folders only
Require("data.table (&gt;=1.12.8)")</code></pre>
<p>Or we can use a hybrid of our main, “personal” library and a project specific one for “extra” packages:</p>
<p><code>{r standALone} setLibPaths("Project_A_Packages", standAlone = FALSE) .libPaths() # we have added a library to original ones on this system Require("data.table (&gt;=1.12.8)")</code></p>
<div id="installing-old-package-versions" class="section level3">
<h3 class="hasAnchor">
<a href="#installing-old-package-versions" class="anchor"></a>Installing old package versions</h3>
<p>In the same way as above, we can specify maximum or exact package versions. <code>Require</code> will retrieve these on CRAN archives.</p>
<p><code>{r archiveVersions} Require("data.table (&lt;=1.11.0)")</code></p>
</div>
<div id="managing-a-project" class="section level3">
<h3 class="hasAnchor">
<a href="#managing-a-project" class="anchor"></a>Managing a project</h3>
<p>Because it is vectorized, there can be a long list of packages at the top of a project file, with various sources and version specifications.</p>
<p><code>{r LongPackageList} library(Require) setLibPaths("ProjectA", standAlone = TRUE) Require(c("data.table (==1.12.8)", "dplyr", "reproducible",            "PredictiveEcology/SpaDES@development", "raster (&gt;=3.1.5)"))</code></p>
</div>
<div id="taking-a-snapshot" class="section level3">
<h3 class="hasAnchor">
<a href="#taking-a-snapshot" class="anchor"></a>Taking a snapshot</h3>
<p>When a system is set up with the correct packages and versions, we can take a snapshot and give that file to another person or machine:</p>
<p>```{r packageSnaptop} pkgSnapshot(“mySnapshot.txt”, standAlone = TRUE) # to get only the project specific ones</p>
</div>
<div id="move-to-a-new-machine-say" class="section level2">
<h2 class="hasAnchor">
<a href="#move-to-a-new-machine-say" class="anchor"></a>move to a new machine, say</h2>
<p>Require::Require(packageVersionFile = “mySnapshot.txt”)</p>
<pre><code>
# Installing

## News

See updates from latest [CRAN](https://cran.r-project.org/package=Require) and [development](https://github.com/PredictiveEcology/Require/blob/development/NEWS.md) versions. 

## Installation

### Current release (not yet on CRAN)

[![Build Status](https://travis-ci.org/PredictiveEcology/Require.svg?branch=master)](https://travis-ci.org/PredictiveEcology/Require)
[![Appveyor Build status](https://ci.appveyor.com/api/projects/status/2fxqhgk6miv2fytd/branch/master?svg=true)](https://ci.appveyor.com/project/achubaty/Require/branch/master)
[![Coverage Status](https://coveralls.io/repos/github/PredictiveEcology/Require/badge.svg?branch=master)](https://coveralls.io/github/PredictiveEcology/Require?branch=master)

**Install from CRAN:**

Not yet on CRAN
```r
# install.packages("Require")</code></pre>
<p><strong>Install from GitHub:</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co">#install.packages("devtools")</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"devtools"</span>)</a>
<a class="sourceLine" id="cb3-3" title="3"><span class="kw">install_github</span>(<span class="st">"PredictiveEcology/Require"</span>, <span class="dt">dependencies =</span> <span class="ot">TRUE</span>) </a></code></pre></div>
<div id="development-version" class="section level3">
<h3 class="hasAnchor">
<a href="#development-version" class="anchor"></a>Development version</h3>
<p><a href="https://travis-ci.org/PredictiveEcology/Require"><img src="https://travis-ci.org/PredictiveEcology/Require.svg?branch=development" alt="Build Status"></a> <a href="https://ci.appveyor.com/project/achubaty/Require/branch/development"><img src="https://ci.appveyor.com/api/projects/status/2fxqhgk6miv2fytd/branch/development?svg=true" alt="Appveyor Build status"></a> <a href="https://coveralls.io/github/PredictiveEcology/Require?branch=development"><img src="https://coveralls.io/repos/github/PredictiveEcology/Require/badge.svg?branch=development" alt="Coverage Status"></a></p>
<p><strong>Install from GitHub:</strong></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co">#install.packages("devtools")</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"devtools"</span>)</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="kw">install_github</span>(<span class="st">"PredictiveEcology/Require"</span>, <span class="dt">ref =</span> <span class="st">"development"</span>, <span class="dt">dependencies =</span> <span class="ot">TRUE</span>) </a></code></pre></div>
</div>
</div>
</div>
<div id="conclusion" class="section level1">
<h1 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h1>
<p><code>Require</code> package offers a simple, lightweight, package focused around a single function. The package has very few dependencies and so can be used to install packages without interfering with itself.</p>
<div id="contributions" class="section level2">
<h2 class="hasAnchor">
<a href="#contributions" class="anchor"></a>Contributions</h2>
<p>Please see <code>CONTRIBUTING.md</code> for information on how to contribute to this project.</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/PredictiveEcology/Require">https://​github.com/​PredictiveEcology/​Require</a>
</li>
<li>Report a bug at <br><a href="https://github.com/PredictiveEcology/Require/issues">https://​github.com/​PredictiveEcology/​Require/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Eliot J B McIntire <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-6914-8316" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=Require"><img src="http://www.r-pkg.org/badges/version/Require" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=Require"><img src="http://cranlogs.r-pkg.org/badges/grand-total/Require" alt="CRAN Downloads"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Eliot J B McIntire.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
